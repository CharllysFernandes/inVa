<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="Content-Security-Policy"
    content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self'; object-src 'none';" />
  <title>inVa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="popup.css" />
</head>

<body>
  <main class="popup-layout">
    <header class="app-header">
      <img src="Logo.png" alt="Logotipo da inVa" class="app-logo" width="40" height="40" />
      <div class="app-meta">
        <h1 class="app-title">inVa</h1>
        <p id="appVersion" class="app-version" aria-live="polite">&nbsp;</p>
      </div>
    </header>

    <section class="card" aria-labelledby="ticket-section-title">
      <div class="card-header">
        <h2 id="ticket-section-title" class="card-title">Fluxo</h2>
        <p class="card-subtitle">Salve a URL base que será usada para inserir o campo de anotação.</p>
      </div>
      <label class="input-label" for="createTicketUrl">URL de criação de chamado</label>
      <input id="createTicketUrl" class="text-input" type="url" placeholder="https://exemplo.com/criar-chamado"
        autocomplete="off" />
      <div class="actions">
        <button id="saveCreateTicketUrl" type="button" class="primary">Salvar URL</button>
        <p id="saveStatus" class="status-message" aria-live="polite" hidden>Salvo!</p>
      </div>
    </section>

    <section class="card" aria-labelledby="openrouter-section-title">
      <div class="card-header">
        <h2 id="openrouter-section-title" class="card-title">API do OpenRouter</h2>
        <p class="card-subtitle">Configure suas credenciais para integração com OpenRouter.</p>
      </div>
      <label class="input-label" for="openrouterApiKey">API Key</label>
      <input id="openrouterApiKey" class="text-input" type="password" placeholder="sk-or-v1-..." autocomplete="off" />
      <label class="input-label" for="openrouterSiteUrl">Site URL (opcional)</label>
      <input id="openrouterSiteUrl" class="text-input" type="url" placeholder="https://seu-site.com"
        autocomplete="off" />
      <label class="input-label" for="openrouterAppName">App Name (opcional)</label>
      <input id="openrouterAppName" class="text-input" type="text" placeholder="inVa Extension" autocomplete="off" />
      <div class="actions">
        <button id="saveOpenRouterConfig" type="button" class="primary">Salvar Configuração</button>
        <button id="testOpenRouterConnection" type="button" class="secondary">Testar Conexão</button>
        <p id="openrouterStatus" class="status-message" aria-live="polite" hidden>Salvo!</p>
      </div>
    </section>

    <section class="card" aria-labelledby="general-settings-section-title">
      <div class="card-header">
        <h2 id="general-settings-section-title" class="card-title">Configurações Gerais</h2>
        <p class="card-subtitle">Personalize o comportamento da extensão.</p>
      </div>
      <label class="toggle" for="hideKnowledgeBase">
        <input id="hideKnowledgeBase" type="checkbox" />
        <span>Esconder base de conhecimento do topo da descrição do chamado</span>
      </label>
      <div class="actions">
        <button id="saveGeneralSettings" type="button" class="primary">Salvar Configurações</button>
        <p id="generalSettingsStatus" class="status-message" aria-live="polite" hidden>Salvo!</p>
      </div>
    </section>

    <section class="card" aria-labelledby="diagnostics-section-title">
      <div class="card-header">
        <h2 id="diagnostics-section-title" class="card-title">Diagnóstico</h2>
        <p class="card-subtitle">Use o modo debug para investigar comportamentos e acessar os últimos registros.</p>
      </div>
      <label class="toggle" for="debugEnabled">
        <input id="debugEnabled" type="checkbox" />
        <span>Modo debug</span>
      </label>
      <div class="actions">
        <button id="viewLogs" type="button" class="secondary">Ver logs</button>
        <button id="clearLogs" type="button" class="secondary">Limpar logs</button>
      </div>
      <pre id="logsOutput" class="log-output" hidden></pre>
    </section>
  </main>
  <script type="module" src="popup.js"></script>
</body>

</html>